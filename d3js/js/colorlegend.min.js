"use strict";var colorlegend=function(y,z,d,c){var s=["linear","quantile","ordinal"],l=false,m=c||{},g=m.boxWidth||20,f=m.boxHeight||20,B=m.title||null,r=m.fill||false,x=m.linearBoxes||9,C=document.getElementById(y.substring(0,1)==="#"?y.substring(1,y.length):y),k=C.offsetWidth,v=C.offsetHeight,j=[],o=[2,4,10,4],q=d==="ordinal"?3:0,a=B?11:0,A=z.domain(),n=z.range(),u=0;for(u=0;u<s.length;u++){if(s[u]===d){l=true;break}}if(!l){throw new Error("Scale type, "+d+", is not suported.")}if(d==="quantile"){j=n}else{if(d==="ordinal"){for(u=0;u<A.length;u++){j[u]=n[u]}}else{if(d==="linear"){var p=A[0];var t=A[A.length-1];for(u=0;u<x;u++){j[u]=z(p+u*((t-p)/x))}}}}if(r||k<(g+q)*j.length+o[1]+o[3]){g=(k-o[1]-o[3]-(q*j.length))/j.length}if(r||v<f+o[0]+o[2]+a){f=v-o[0]-o[2]-a}var b=d3.select(y).append("svg").attr("width",k).attr("height",v).append("g").attr("class","colorlegend").attr("transform","translate("+o[3]+","+o[0]+")").style("font-size","11px").style("fill","#666");var e=b.selectAll("g.legend").data(j).enter().append("g");e.append("text").attr("class","colorlegend-labels").attr("dy",".71em").attr("x",function(w,h){return h*(g+q)+(d!=="ordinal"?(g/2):0)}).attr("y",function(){return f+2}).style("text-anchor",function(){return d==="ordinal"?"start":"middle"}).style("pointer-events","none").text(function(w,h){if(d==="ordinal"){return A[h]}else{if(h===0){return A[0]}if(h===j.length-1){return A[A.length-1]}}});e.append("rect").attr("x",function(w,h){return h*(g+q)}).attr("width",g).attr("height",f).style("fill",function(w,h){return j[h]});if(B){b.append("text").attr("class","colorlegend-title").attr("x",(j.length*(g/2))).attr("y",f+a).attr("dy",".71em").style("text-anchor","middle").style("pointer-events","none").text(B)}return this};